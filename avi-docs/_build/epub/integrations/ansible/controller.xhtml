<!DOCTYPE html>


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Avi Controller Role</title>
    
    <link rel="stylesheet" href="../../_static/epub.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" /> 
  </head>
  <body role="document">

    <div class="document">
      <div class="documentwrapper">
          <div class="body" role="main">
            
  <div class="section" id="avi-controller-role">
<h1>Avi Controller Role</h1>
<p>To help automate the deployment of Avi Vantage Controller in your environment we&#8217;ve developed an Ansible Role which can deploy in many environemnts. This includes deploying from Docker Hub, Private Docker Repo, Docker compressed images (tgz), as well as some cloud environments including CSP deployment.</p>
<div class="contents local topic" id="contents">
<p class="topic-title first">Contents</p>
<ul class="simple">
<li><a class="reference internal" href="#prerequisites" id="id3">Prerequisites</a></li>
<li><a class="reference internal" href="#parameters" id="id4">Parameters</a></li>
<li><a class="reference internal" href="#deploying-avi-controller" id="id5">Deploying Avi Controller</a><ul>
<li><a class="reference internal" href="#bare-metal-avi-deployment" id="id6">Bare-metal Avi Deployment</a><ul>
<li><a class="reference internal" href="#requirements" id="id7">Requirements</a></li>
<li><a class="reference internal" href="#using-docker-hub" id="id8">Using Docker Hub</a></li>
<li><a class="reference internal" href="#using-a-private-docker-repository" id="id9">Using a Private Docker Repository</a></li>
<li><a class="reference internal" href="#using-a-compressed-docker-image" id="id10">Using a Compressed Docker Image</a></li>
</ul>
</li>
<li><a class="reference internal" href="#cisco-csp-avi-deployment" id="id11">Cisco CSP Avi Deployment</a><ul>
<li><a class="reference internal" href="#id2" id="id12">Requirements</a></li>
<li><a class="reference internal" href="#using-qcow-image" id="id13">Using QCOW image</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="section" id="prerequisites">
<h2><a class="toc-backref" href="#id3">Prerequisites</a></h2>
<p>To get started you will need the following:</p>
<ul class="simple">
<li>Ansible 2.2 or higher</li>
<li>a server to install Avi Controller on (Baremetal, CSP, etc.)</li>
</ul>
</div>
<div class="section" id="parameters">
<h2><a class="toc-backref" href="#id4">Parameters</a></h2>
<p>Ansible Role can take parameters, these parameters can determine where and how Ansible will execute the installation and configuration of the Avi Vantage Controller.</p>
<p>Due to the fast pace of features and parameters that get added we will not include them here directly, but they can be accessed in two places. In our public GitHub repository (<a class="reference external" href="https://github.com/avinetworks/ansible-role-avicontroller">https://github.com/avinetworks/ansible-role-avicontroller</a>) or in the Ansible Galaxy (<a class="reference external" href="https://galaxy.ansible.com/avinetworks/avicontroller/">https://galaxy.ansible.com/avinetworks/avicontroller/</a>). The readme includes all possible parameters.</p>
</div>
<div class="section" id="deploying-avi-controller">
<h2><a class="toc-backref" href="#id5">Deploying Avi Controller</a></h2>
<div class="section" id="bare-metal-avi-deployment">
<h3><a class="toc-backref" href="#id6">Bare-metal Avi Deployment</a></h3>
<div class="contents local topic" id="id1">
<p class="topic-title first">Contents</p>
<ul class="simple">
<li><a class="reference internal" href="#requirements" id="id14">Requirements</a></li>
<li><a class="reference internal" href="#using-docker-hub" id="id15">Using Docker Hub</a></li>
<li><a class="reference internal" href="#using-a-private-docker-repository" id="id16">Using a Private Docker Repository</a></li>
<li><a class="reference internal" href="#using-a-compressed-docker-image" id="id17">Using a Compressed Docker Image</a></li>
</ul>
</div>
<div class="section" id="requirements">
<h4><a class="toc-backref" href="#id14">Requirements</a></h4>
<ul class="simple">
<li>CentOS/RHEL/OracleLinux 7.x</li>
<li>Ubuntu 14.04 or higher</li>
<li>Docker 1.12 or higher</li>
</ul>
</div>
<div class="section" id="using-docker-hub">
<h4><a class="toc-backref" href="#id15">Using Docker Hub</a></h4>
<p>Deploying Avi Controller from the Docker Hub is the default action. However it does require the server to have internet access to Docker Hub as it will download the image.</p>
<p><strong>Steps:</strong></p>
<ol class="arabic simple">
<li>Install the Avi Controller role on the host you are executing from.</li>
</ol>
<blockquote>
<div><div class="highlight-bash"><div class="highlight"><pre><span></span>sudo ansible-galaxy -f avinetworks.avicontroller
</pre></div>
</div>
</div></blockquote>
<ol class="arabic simple" start="2">
<li>Identify how we want to define our hosts. Ansible can accept hosts three ways: command-line, by inventory file, or by dynamic inventory file. We will use an inventory in this case. Ansible by default uses /etc/ansible/hosts as it&#8217;s default inventory. Lets add this segment to the bottom of the page.</li>
</ol>
<blockquote>
<div><div class="highlight-text"><div class="highlight"><pre><span></span>[avicontrollers]
10.120.202.24
</pre></div>
</div>
<p>Replace the IP with the IP of your baremetal host you want to deploy to.</p>
</div></blockquote>
<ol class="arabic simple" start="3">
<li>Create the playbook. It should look similar to this</li>
</ol>
<blockquote>
<div><div class="highlight-yaml"><div class="highlight"><pre><span></span><span class="c1"># myplaybook.yml</span>
<span class="nn">---</span>
<span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">hosts</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">avicontrollers</span>
  <span class="l l-Scalar l-Scalar-Plain">become</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">true</span>
  <span class="l l-Scalar l-Scalar-Plain">roles</span><span class="p p-Indicator">:</span>
    <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">role</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">avinetworks.avicontroller</span>
      <span class="l l-Scalar l-Scalar-Plain">con_controller_ip</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">10.120.202.24</span>
      <span class="l l-Scalar l-Scalar-Plain">con_cores</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">4</span>
      <span class="l l-Scalar l-Scalar-Plain">con_memory_gb</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">16</span>
</pre></div>
</div>
<p>However, there are are many possible values which can be found on the roles README file (<a class="reference external" href="https://github.com/avinetworks/ansible-role-avicontroller">https://github.com/avinetworks/ansible-role-avicontroller</a>). Each one allows customization of the deployment.</p>
<p>In this playbook we are specifying that this &#8220;play&#8221; should apply to the &#8220;avicontrollers&#8221; hosts. Which we have previously defined in the inventory file. We are also specifying that the controllers IP is 10.10.27.101, this is used to properly determine the interface that the controller will use. We are then specifying the core count that the controller will use. This is the amount of cores that docker will be permitted to use for the controller. Then we specify the amount of memory in GB that the controller will be permitted to use. We recommend using 16GB or more.</p>
</div></blockquote>
<ol class="arabic simple" start="4">
<li>Verify your local user has access to the hosts you are deploying the controller to. You will need <cite>sudo</cite> access as well. Login using your current user.</li>
</ol>
<blockquote>
<div><div class="highlight-bash"><div class="highlight"><pre><span></span>ssh <span class="m">10</span>.120.202.24
</pre></div>
</div>
</div></blockquote>
<ol class="arabic simple" start="5">
<li>Execute the playbook.</li>
</ol>
<blockquote>
<div><div class="admonition note">
<p class="first admonition-title">Note</p>
<ul class="last simple">
<li>If you are not using an ssh-key you will also need to specify <cite>&#8211;ask-pass</cite> to ansible.</li>
<li>If your current user is different you will need to specify <cite>-u &lt;username&gt;</cite> to ansible.</li>
</ul>
</div>
<div class="code Bash highlight-default"><div class="highlight"><pre><span></span><span class="n">ansible</span><span class="o">-</span><span class="n">playbook</span> <span class="n">myplaybook</span><span class="o">.</span><span class="n">yml</span> <span class="o">-</span><span class="n">u</span> <span class="o">&lt;</span><span class="n">username</span><span class="o">&gt;</span> <span class="o">--</span><span class="n">ask</span><span class="o">-</span><span class="k">pass</span>
</pre></div>
</div>
</div></blockquote>
</div>
<div class="section" id="using-a-private-docker-repository">
<h4><a class="toc-backref" href="#id16">Using a Private Docker Repository</a></h4>
<p><strong>Steps:</strong></p>
<ol class="arabic simple">
<li>Install the Avi Controller role on the host you are executing from.</li>
</ol>
<blockquote>
<div><div class="highlight-bash"><div class="highlight"><pre><span></span>sudo ansible-galaxy -f avinetworks.avicontroller
</pre></div>
</div>
</div></blockquote>
<ol class="arabic simple" start="2">
<li>Identify how we want to define our hosts. Ansible can accept hosts three ways: command-line, by inventory file, or by dynamic inventory file. We will use an inventory in this case. Ansible by default uses /etc/ansible/hosts as it&#8217;s default inventory. Lets add this segment to the bottom of the page.</li>
</ol>
<blockquote>
<div><div class="highlight-text"><div class="highlight"><pre><span></span>[avicontrollers]
10.120.202.24
</pre></div>
</div>
<p>Replace the IP with the IP of your baremetal host you want to deploy to.</p>
</div></blockquote>
<ol class="arabic simple" start="3">
<li>Create the playbook. It should look similar to this</li>
</ol>
<blockquote>
<div><div class="highlight-yaml"><div class="highlight"><pre><span></span><span class="c1"># myplaybook.yml</span>
<span class="nn">---</span>
<span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">hosts</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">avicontrollers</span>
  <span class="l l-Scalar l-Scalar-Plain">become</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">true</span>
  <span class="l l-Scalar l-Scalar-Plain">roles</span><span class="p p-Indicator">:</span>
    <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">role</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">avinetworks.avicontroller</span>
      <span class="l l-Scalar l-Scalar-Plain">con_docker_repo</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">mydockerrepo.company.com</span>
      <span class="l l-Scalar l-Scalar-Plain">con_version</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">16.3.9-23923929323923</span>
      <span class="l l-Scalar l-Scalar-Plain">con_docker_repo_user</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">admin</span>
      <span class="l l-Scalar l-Scalar-Plain">con_docker_repo_password</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">adminpassword</span>
      <span class="l l-Scalar l-Scalar-Plain">con_controller_ip</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">10.120.202.24</span>
      <span class="l l-Scalar l-Scalar-Plain">con_cores</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">4</span>
      <span class="l l-Scalar l-Scalar-Plain">con_memory_gb</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">16</span>
</pre></div>
</div>
<p>However, there are are many possible values which can be found on the roles README file (<a class="reference external" href="https://github.com/avinetworks/ansible-role-avicontroller">https://github.com/avinetworks/ansible-role-avicontroller</a>). Each one allows customization of the deployment.</p>
<p>In this playbook we are specifying that this &#8220;play&#8221; should apply to the &#8220;avicontrollers&#8221; hosts. Which we have previously defined in the inventory file. We are also specifying that the controllers IP is 10.10.27.101, this is used to properly determine the interface that the controller will use. We are then specifying the core count that the controller will use. This is the amount of cores that docker will be permitted to use for the controller. Then we specify the amount of memory in GB that the controller will be permitted to use. We recommend using 16GB or more.</p>
</div></blockquote>
<ol class="arabic simple" start="4">
<li>Verify your local user has access to the hosts you are deploying the controller to. You will need <cite>sudo</cite> access as well. Login using your current user.</li>
</ol>
<blockquote>
<div><div class="highlight-bash"><div class="highlight"><pre><span></span>ssh <span class="m">10</span>.120.202.24
</pre></div>
</div>
</div></blockquote>
<ol class="arabic simple" start="5">
<li>Execute the playbook.</li>
</ol>
<blockquote>
<div><div class="admonition note">
<p class="first admonition-title">Note</p>
<ul class="last simple">
<li>If you are not using an ssh-key you will also need to specify <cite>&#8211;ask-pass</cite> to ansible.</li>
<li>If your current user is different you will need to specify <cite>-u &lt;username&gt;</cite> to ansible.</li>
</ul>
</div>
<div class="code bash highlight-default"><div class="highlight"><pre><span></span><span class="n">ansible</span><span class="o">-</span><span class="n">playbook</span> <span class="n">myplaybook</span><span class="o">.</span><span class="n">yml</span> <span class="o">-</span><span class="n">u</span> <span class="o">&lt;</span><span class="n">username</span><span class="o">&gt;</span> <span class="o">--</span><span class="n">ask</span><span class="o">-</span><span class="k">pass</span>
</pre></div>
</div>
</div></blockquote>
</div>
<div class="section" id="using-a-compressed-docker-image">
<h4><a class="toc-backref" href="#id17">Using a Compressed Docker Image</a></h4>
<p><strong>Steps:</strong></p>
<ol class="arabic simple">
<li>Install the Avi Controller role on the host you are executing from.</li>
</ol>
<blockquote>
<div><div class="highlight-bash"><div class="highlight"><pre><span></span>sudo ansible-galaxy -f avinetworks.avicontroller
</pre></div>
</div>
</div></blockquote>
<ol class="arabic simple" start="2">
<li>Identify how we want to define our hosts. Ansible can accept hosts three ways: command-line, by inventory file, or by dynamic inventory file. We will use an inventory in this case. Ansible by default uses /etc/ansible/hosts as it&#8217;s default inventory. Lets add this segment to the bottom of the page.</li>
</ol>
<blockquote>
<div><div class="highlight-text"><div class="highlight"><pre><span></span>[avicontrollers]
10.120.202.24
</pre></div>
</div>
<p>Replace the IP with the IP of your baremetal host you want to deploy to.</p>
</div></blockquote>
<ol class="arabic simple" start="3">
<li>Create the playbook. It should look similar to this</li>
</ol>
<blockquote>
<div><div class="highlight-yaml"><div class="highlight"><pre><span></span><span class="c1"># myplaybook.yml</span>
<span class="nn">---</span>
<span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">hosts</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">avicontrollers</span>
  <span class="l l-Scalar l-Scalar-Plain">become</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">true</span>
  <span class="l l-Scalar l-Scalar-Plain">roles</span><span class="p p-Indicator">:</span>
    <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">role</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">avinetworks.avicontroller</span>
      <span class="l l-Scalar l-Scalar-Plain">con_package_deploy</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">true</span>
      <span class="l l-Scalar l-Scalar-Plain">con_package_source</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">/home/user/Downloads/controller_docker.tgz</span>
      <span class="l l-Scalar l-Scalar-Plain">con_controller_ip</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">10.120.202.24</span>
      <span class="l l-Scalar l-Scalar-Plain">con_cores</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">4</span>
      <span class="l l-Scalar l-Scalar-Plain">con_memory_gb</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">16</span>
</pre></div>
</div>
<p>However, there are are many possible values which can be found on the roles README file (<a class="reference external" href="https://github.com/avinetworks/ansible-role-avicontroller">https://github.com/avinetworks/ansible-role-avicontroller</a>). Each one allows customization of the deployment.</p>
<p>In this playbook we are specifying that this &#8220;play&#8221; should apply to the &#8220;avicontrollers&#8221; hosts. Which we have previously defined in the inventory file. We are also specifying that the controllers IP is 10.10.27.101, this is used to properly determine the interface that the controller will use. We are then specifying the core count that the controller will use. This is the amount of cores that docker will be permitted to use for the controller. Then we specify the amount of memory in GB that the controller will be permitted to use. We recommend using 16GB or more. We also needed to specify that we want to deploy from package via <code class="docutils literal"><span class="pre">con_package_deploy:</span> <span class="pre">true</span></code> which tells the role we&#8217;re deploying from package. Then we provided the location of the package file by providing the <code class="docutils literal"><span class="pre">con_package_source</span></code> parameter.</p>
</div></blockquote>
<ol class="arabic simple" start="4">
<li>Verify your local user has access to the hosts you are deploying the controller to. You will need <cite>sudo</cite> access as well. Login using your current user.</li>
</ol>
<blockquote>
<div><div class="highlight-bash"><div class="highlight"><pre><span></span>ssh <span class="m">10</span>.120.202.24
</pre></div>
</div>
</div></blockquote>
<ol class="arabic simple" start="5">
<li>Execute the playbook.</li>
</ol>
<blockquote>
<div><div class="admonition note">
<p class="first admonition-title">Note</p>
<ul class="last simple">
<li>If you are not using an ssh-key you will also need to specify <cite>&#8211;ask-pass</cite> to ansible.</li>
<li>If your current user is different you will need to specify <cite>-u &lt;username&gt;</cite> to ansible.</li>
</ul>
</div>
<div class="code bash highlight-default"><div class="highlight"><pre><span></span><span class="n">ansible</span><span class="o">-</span><span class="n">playbook</span> <span class="n">myplaybook</span><span class="o">.</span><span class="n">yml</span> <span class="o">-</span><span class="n">u</span> <span class="o">&lt;</span><span class="n">username</span><span class="o">&gt;</span> <span class="o">--</span><span class="n">ask</span><span class="o">-</span><span class="k">pass</span>
</pre></div>
</div>
</div></blockquote>
</div>
</div>
<div class="section" id="cisco-csp-avi-deployment">
<h3><a class="toc-backref" href="#id11">Cisco CSP Avi Deployment</a></h3>
<div class="section" id="id2">
<h4><a class="toc-backref" href="#id12">Requirements</a></h4>
</div>
<div class="section" id="using-qcow-image">
<h4><a class="toc-backref" href="#id13">Using QCOW image</a></h4>
<p><strong>Steps:</strong></p>
<ol class="arabic simple">
<li>Install the Avi Controller role on the host you are executing from.</li>
</ol>
<blockquote>
<div><div class="highlight-bash"><div class="highlight"><pre><span></span>sudo ansible-galaxy -f avinetworks.avicontroller
</pre></div>
</div>
</div></blockquote>
<ol class="arabic simple">
<li>Identify how we want to define our hosts. Ansible can accept hosts three ways: command-line, by inventory file, or by dynamic inventory file. We will use an inventory in this case. Ansible by default uses /etc/ansible/hosts as it&#8217;s default inventory. Lets add this segment to the bottom of the page.</li>
</ol>
<blockquote>
<div><div class="highlight-text"><div class="highlight"><pre><span></span>[csp_devices]
10.120.222.56
</pre></div>
</div>
<p>Replace the IP with the IP of your CSP host you want to deploy to.</p>
</div></blockquote>
<ol class="arabic simple">
<li>Make sure you are able to SSH into the CSP device.</li>
</ol>
<blockquote>
<div><div class="highlight-bash"><div class="highlight"><pre><span></span>ssh user@10.120.222.56
</pre></div>
</div>
</div></blockquote>
<ol class="arabic simple">
<li>Create the playbook. It should look similar to this</li>
</ol>
<blockquote>
<div><div class="highlight-yaml"><div class="highlight"><pre><span></span><span class="c1"># myplaybook.yml</span>
<span class="nn">---</span>
<span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">hosts</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">csp_devices</span>
  <span class="l l-Scalar l-Scalar-Plain">gather_facts</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">false</span>
  <span class="l l-Scalar l-Scalar-Plain">roles</span><span class="p p-Indicator">:</span>
    <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">role</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">avinetworks.avicontroller</span>
      <span class="l l-Scalar l-Scalar-Plain">con_deploy_type</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">csp</span>
      <span class="l l-Scalar l-Scalar-Plain">con_csp_user</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">admin</span>
      <span class="l l-Scalar l-Scalar-Plain">con_csp_password</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">password</span>
      <span class="l l-Scalar l-Scalar-Plain">con_csp_qcow_image_file</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">avi-controller.qcow2</span>
      <span class="l l-Scalar l-Scalar-Plain">con_csp_mgmt_ip</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">10.128.2.20</span>
      <span class="l l-Scalar l-Scalar-Plain">con_csp_mgmt_mask</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">255.255.255.0</span>
      <span class="l l-Scalar l-Scalar-Plain">con_csp_default_gw</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">10.128.2.1</span>
      <span class="l l-Scalar l-Scalar-Plain">con_csp_service_name</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">avi-controller</span>
      <span class="l l-Scalar l-Scalar-Plain">con_csp_num_cpu</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">4</span>
      <span class="l l-Scalar l-Scalar-Plain">con_csp_memory_gb</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">16</span>
</pre></div>
</div>
<dl class="docutils">
<dt>con_deploy_type:</dt>
<dd>Sets the type of deployment that should be triggered.</dd>
<dt>con_csp_user:</dt>
<dd>Username that will be used to connect to the CSP server</dd>
<dt>con_csp_password:</dt>
<dd>Password required to authenticate the user</dd>
<dt>con_csp_qcow_image_file:</dt>
<dd>is the relative, or absolute location of the qcow file that will be uploaded to the CSP device.</dd>
<dt>con_csp_mgmt_ip:</dt>
<dd>IP of the controller on the management network.</dd>
<dt>con_csp_mgmt_mask:</dt>
<dd>Subnet mask that the controller will require.</dd>
<dt>con_csp_default_gw:</dt>
<dd>Default gateway for the controller</dd>
<dt>con_csp_service_name:</dt>
<dd>Name of the service to be created on the CSP</dd>
<dt>con_csp_num_cpu:</dt>
<dd>Number of CPUs to be allocated to the Controller</dd>
<dt>con_csp_memory_gb:</dt>
<dd>Amount of memory in GB allocated to the Controller</dd>
</dl>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">There are are many possible values which can be found on the roles README file (<a class="reference external" href="https://github.com/avinetworks/ansible-role-avicontroller">https://github.com/avinetworks/ansible-role-avicontroller</a>). Each one allows customization of the deployment.</p>
</div>
<p>In this playbook we are specifying that this &#8220;play&#8221; should apply to the &#8220;csp_devices&#8221; hosts. Anything not required mentioned here <a class="reference external" href="https://github.com/avinetworks/ansible-role-avicontroller#csp-deployment-variables">CSP Deployment Variables</a><span class="link-target"> [https://github.com/avinetworks/ansible-role-avicontroller#csp-deployment-variables]</span> can be omitted from your role parameters. Defaults are also noted on that document.</p>
</div></blockquote>
<ol class="arabic simple">
<li>Execute the playbook.</li>
</ol>
<blockquote>
<div><div class="admonition note">
<p class="first admonition-title">Note</p>
<ul class="last simple">
<li>If you are not using an ssh-key you will also need to specify <cite>&#8211;ask-pass</cite> to ansible.</li>
<li>If your current user is different you will need to specify <cite>-u &lt;username&gt;</cite> to ansible.</li>
</ul>
</div>
<div class="code bash highlight-default"><div class="highlight"><pre><span></span><span class="n">ansible</span><span class="o">-</span><span class="n">playbook</span> <span class="n">myplaybook</span><span class="o">.</span><span class="n">yml</span> <span class="o">-</span><span class="n">u</span> <span class="o">&lt;</span><span class="n">username</span><span class="o">&gt;</span> <span class="o">--</span><span class="n">ask</span><span class="o">-</span><span class="k">pass</span>
</pre></div>
</div>
</div></blockquote>
</div>
</div>
</div>
</div>


          </div>
      </div>
      <div class="clearer"></div>
    </div>
  </body>
</html>